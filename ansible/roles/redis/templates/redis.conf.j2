# Redis Configuration
# Managed by Ansible

# Network
bind {{ redis_bind }}
protected-mode {{ redis_protected_mode }}
port {{ redis_port }}

# General
daemonize no
pidfile /var/run/redis/redis-server.pid
loglevel notice
databases 16

# Persistence
dir /data
{% if redis_save_enabled %}
save 900 1
save 300 10
save 60 10000
{% endif %}
appendonly {{ redis_appendonly }}

# Memory management
maxmemory {{ redis_maxmemory }}
maxmemory-policy {{ redis_maxmemory_policy }}

# Performance
tcp-backlog 511
tcp-keepalive 300
timeout 0

# Disable dangerous commands in production
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command CONFIG ""